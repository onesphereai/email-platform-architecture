digraph "Email API Integration - Sequence Flow" {
	graph [fontcolor="#2D3436" fontname="Sans-Serif" fontsize=15 label="Email API Integration - Sequence Flow" nodesep=0.60 pad=2.0 rankdir=TB ranksep=0.75 splines=ortho]
	node [fixedsize=true fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13 height=1.4 imagescale=true labelloc=b shape=box style=rounded width=1.4]
	edge [color="#7B8894"]
	"577fa71c0443456588b7d46ec2a15f95" [label="API Client
(External System)" height=2.3 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/general/user.png" shape=none]
	subgraph "cluster_API Security" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="API Security" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		"5d1afe9cf5404c60918d07d14a310140" [label="API Gateway
- Rate Limiting
- Request Validation" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/mobile/api-gateway.png" shape=none]
		"4308498aeb6e4292b26ffc6a040de9c1" [label="Auth Validator
- x-api-key
- OAuth2
- mTLS" height=3.1 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
	}
	subgraph "cluster_Email API Services" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="Email API Services" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		cdb41c6e745b42458108928839125f59 [label="Email API
- Request Processing
- Business Logic" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
		bf0410e1187245a2b15f1688e29d47e8 [label="Template Engine
- HTML Rendering
- Variable Substitution" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
		"526789efd1724102a1aecba8daf8d190" [label="Recipient Processor
- List Validation
- Segmentation" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
	}
	subgraph "cluster_Message Processing" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="Message Processing" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		"18fbacf116fd480fb9fcb1675aedf011" [label="Email Queue
- Batch Processing
- Priority Handling" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/integration/simple-queue-service-sqs.png" shape=none]
		dee80c336ece4554bde2cc9c5a48880a [label="Batch Processor
- SES Integration
- Throttling" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
	}
	subgraph "cluster_Data Layer" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="Data Layer" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		"577603a399954a579f825154876accf8" [label="DynamoDB
- Campaign Data
- Delivery Status" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/database/dynamodb.png" shape=none]
		db196b522ea246cc998cf18b078be430 [label="S3 Storage
- Templates
- Assets" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/storage/simple-storage-service-s3.png" shape=none]
	}
	subgraph "cluster_Email Service" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="Email Service" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		"35ed672e4f4b45a39248def2174d88bc" [label="Amazon SES
- Email Delivery
- Bounce Handling" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/engagement/simple-email-service-ses.png" shape=none]
	}
	subgraph "cluster_Analytics & Notifications" {
		graph [bgcolor="#E5F5FD" fontname="Sans-Serif" fontsize=12 label="Analytics & Notifications" labeljust=l pencolor="#AEB6BE" rankdir=LR shape=box style=rounded]
		dcd94ef694df4e65b41dc11e80cf3d3c [label="Analytics Processor
- Metrics Calculation" height=2.3 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
		"6b184d386703424bb0891449a42bfbf5" [label="Webhook Service
- Status Callbacks" height=2.3 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/compute/lambda.png" shape=none]
		"367966834b4a4c0583dcb0fe41f96a44" [label="OpenSearch
- Analytics Storage" height=2.3 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/analytics/amazon-opensearch-service.png" shape=none]
	}
	b4167a98e96742e08fe00c3eba928595 [label="Client Webhook
- Status Updates
- Event Notifications" height=2.7 image="/Users/ammarkhalid/.cache/uv/archive-v0/OvBLnYJFHdF56z-729o2A/lib/python3.13/site-packages/resources/aws/general/generic-office-building.png" shape=none]
	"577fa71c0443456588b7d46ec2a15f95" -> "5d1afe9cf5404c60918d07d14a310140" [label="1. POST /api/v1/campaigns
+ x-api-key header" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"5d1afe9cf5404c60918d07d14a310140" -> "4308498aeb6e4292b26ffc6a040de9c1" [label="2. Validate API Key" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"4308498aeb6e4292b26ffc6a040de9c1" -> "5d1afe9cf5404c60918d07d14a310140" [label="3. Key Valid" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"5d1afe9cf5404c60918d07d14a310140" -> cdb41c6e745b42458108928839125f59 [label="4. Route Request" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> cdb41c6e745b42458108928839125f59 [label="5. Validate Campaign Data" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> bf0410e1187245a2b15f1688e29d47e8 [label="6. Process Template" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	bf0410e1187245a2b15f1688e29d47e8 -> db196b522ea246cc998cf18b078be430 [label="7. Store Template" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	bf0410e1187245a2b15f1688e29d47e8 -> cdb41c6e745b42458108928839125f59 [label="8. Template Processed" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "526789efd1724102a1aecba8daf8d190" [label="9. Process Recipients" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"526789efd1724102a1aecba8daf8d190" -> "526789efd1724102a1aecba8daf8d190" [label="10. Validate Email List" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"526789efd1724102a1aecba8daf8d190" -> cdb41c6e745b42458108928839125f59 [label="11. Recipients Valid" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "577603a399954a579f825154876accf8" [label="12. Save Campaign" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"577603a399954a579f825154876accf8" -> cdb41c6e745b42458108928839125f59 [label="13. Campaign ID" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "5d1afe9cf5404c60918d07d14a310140" [label="14. Campaign Created
{campaignId: 'xxx'}" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"5d1afe9cf5404c60918d07d14a310140" -> "577fa71c0443456588b7d46ec2a15f95" [label="15. 201 Created Response" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "18fbacf116fd480fb9fcb1675aedf011" [label="16. Queue Email Job" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"18fbacf116fd480fb9fcb1675aedf011" -> dee80c336ece4554bde2cc9c5a48880a [label="17. Process Batch" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> db196b522ea246cc998cf18b078be430 [label="18. Get Template" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> "577603a399954a579f825154876accf8" [label="19. Get Recipients" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> bf0410e1187245a2b15f1688e29d47e8 [label="20. Render Emails" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	bf0410e1187245a2b15f1688e29d47e8 -> dee80c336ece4554bde2cc9c5a48880a [label="21. Rendered HTML" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> "35ed672e4f4b45a39248def2174d88bc" [label="22. Send Email Batch" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"35ed672e4f4b45a39248def2174d88bc" -> dee80c336ece4554bde2cc9c5a48880a [label="23. Delivery Receipt" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> "577603a399954a579f825154876accf8" [label="24. Update Status" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> dcd94ef694df4e65b41dc11e80cf3d3c [label="25. Send Analytics" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dcd94ef694df4e65b41dc11e80cf3d3c -> "367966834b4a4c0583dcb0fe41f96a44" [label="26. Store Metrics" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	dee80c336ece4554bde2cc9c5a48880a -> "6b184d386703424bb0891449a42bfbf5" [label="27. Trigger Webhook" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"6b184d386703424bb0891449a42bfbf5" -> b4167a98e96742e08fe00c3eba928595 [label="28. POST Status Update" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"577fa71c0443456588b7d46ec2a15f95" -> "5d1afe9cf5404c60918d07d14a310140" [label="29. GET /api/v1/campaigns/{id}" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"5d1afe9cf5404c60918d07d14a310140" -> cdb41c6e745b42458108928839125f59 [label="30. Validate & Route" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "577603a399954a579f825154876accf8" [label="31. Get Campaign Status" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"577603a399954a579f825154876accf8" -> cdb41c6e745b42458108928839125f59 [label="32. Campaign Data" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "367966834b4a4c0583dcb0fe41f96a44" [label="33. Get Analytics" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"367966834b4a4c0583dcb0fe41f96a44" -> cdb41c6e745b42458108928839125f59 [label="34. Metrics Data" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	cdb41c6e745b42458108928839125f59 -> "5d1afe9cf5404c60918d07d14a310140" [label="35. Status Response" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"5d1afe9cf5404c60918d07d14a310140" -> "577fa71c0443456588b7d46ec2a15f95" [label="36. 200 OK + Status" dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"35ed672e4f4b45a39248def2174d88bc" -> "6b184d386703424bb0891449a42bfbf5" [label="37. Bounce/Complaint" color=red dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"6b184d386703424bb0891449a42bfbf5" -> "577603a399954a579f825154876accf8" [label="38. Update Suppression" color=red dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
	"6b184d386703424bb0891449a42bfbf5" -> b4167a98e96742e08fe00c3eba928595 [label="39. Notify Client" color=red dir=forward fontcolor="#2D3436" fontname="Sans-Serif" fontsize=13]
}
