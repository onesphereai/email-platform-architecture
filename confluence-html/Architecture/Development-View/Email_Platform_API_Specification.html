<!DOCTYPE html>
<html>
<head>
    <title>Email_Platform_API_Specification</title>
    <meta charset="utf-8">
</head>
<body>
<!-- Confluence Storage Format -->
<h1>Email Platform REST API Specification</h1>
<br/>
<h2>Overview</h2>
<br/>
<p>The Email Platform REST API provides comprehensive email marketing capabilities through a RESTful interface. The API supports campaign management, template operations, recipient list management, and detailed analytics.</p>
<br/>
<h2>Base URL</h2>
<br/>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">none</ac:parameter>
  <ac:plain-text-body><![CDATA[
Production: https://api.emailplatform.messagecentre.com/v1
Staging: https://staging-api.emailplatform.messagecentre.com/v1
Development: https://dev-api.emailplatform.messagecentre.com/v1
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h2>Authentication</h2>
<br/>
<p>The API supports multiple authentication methods:</p>
<br/>
<h3>1. API Key Authentication (Required)</h3>
<p>All requests must include an API key in the header:</p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">http</ac:parameter>
  <ac:plain-text-body><![CDATA[
x-api-key: your-api-key-here
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>2. OAuth 2.0 (Optional)</h3>
<p>For enhanced security, OAuth 2.0 Bearer tokens can be used:</p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">http</ac:parameter>
  <ac:plain-text-body><![CDATA[
Authorization: Bearer your-oauth-token-here
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>3. Mutual TLS (Optional)</h3>
<p>For enterprise clients, mTLS authentication is supported through client certificates.</p>
<br/>
<h2>Request/Response Format</h2>
<br/>
<ul>
<li><strong>Content-Type</strong>: <code>application/json</code></li>
<li><strong>Character Encoding</strong>: UTF-8</li>
<li><strong>Date Format</strong>: ISO 8601 (e.g., <code>2024-01-15T10:30:00Z</code>)</li>
</ul>
<br/>
<h2>Rate Limiting</h2>
<br/>
<ul>
<li><strong>Default Limit</strong>: 1000 requests per hour per API key</li>
<li><strong>Burst Limit</strong>: 100 requests per minute</li>
<li><strong>Headers</strong>: Rate limit information is returned in response headers:</li>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">http</ac:parameter>
  <ac:plain-text-body><![CDATA[
  X-RateLimit-Limit: 1000
  X-RateLimit-Remaining: 999
  X-RateLimit-Reset: 1642248600
]]></ac:plain-text-body>
</ac:structured-macro>
</ul>
<br/>
<h2>Error Handling</h2>
<br/>
<h3>Standard HTTP Status Codes</h3>
<br/>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK - Request successful</td>
</tr>
<tr>
<td>201</td>
<td>Created - Resource created successfully</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request - Invalid request parameters</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid or missing authentication</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient permissions</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - Resource not found</td>
</tr>
<tr>
<td>409</td>
<td>Conflict - Resource already exists</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity - Validation errors</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - Rate limit exceeded</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - Server error</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - Service temporarily unavailable</td>
</tr>
</tbody>
</table>
<br/>
<h3>Error Response Format</h3>
<br/>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Request validation failed",
    "details": {
      "field": "email",
      "reason": "Invalid email format"
    },
    "timestamp": "2024-01-15T10:30:00Z",
    "requestId": "req_123456789"
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>Common Error Codes</h3>
<br/>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`INVALID_API_KEY`</td>
<td>API key is invalid or expired</td>
</tr>
<tr>
<td>`VALIDATION_ERROR`</td>
<td>Request validation failed</td>
</tr>
<tr>
<td>`RESOURCE_NOT_FOUND`</td>
<td>Requested resource not found</td>
</tr>
<tr>
<td>`DUPLICATE_RESOURCE`</td>
<td>Resource already exists</td>
</tr>
<tr>
<td>`QUOTA_EXCEEDED`</td>
<td>Account quota exceeded</td>
</tr>
<tr>
<td>`RATE_LIMIT_EXCEEDED`</td>
<td>Rate limit exceeded</td>
</tr>
<tr>
<td>`INSUFFICIENT_PERMISSIONS`</td>
<td>Insufficient permissions for operation</td>
</tr>
</tbody>
</table>
<br/>
<h2>API Endpoints</h2>
<br/>
<h3>1. Campaign Management</h3>
<br/>
<h4>Create Campaign</h4>
<br/>
<p><strong>POST</strong> <code>/campaigns</code></p>
<br/>
<p>Creates a new email campaign.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "name": "Summer Sale 2024",
  "description": "Promotional campaign for summer sale",
  "subject": "ðŸŒž Summer Sale - Up to 50% Off!",
  "fromName": "Marketing Team",
  "fromEmail": "marketing@company.com",
  "replyTo": "support@company.com",
  "template": {
    "html": "<html><body><h1>{{firstName}}, don't miss our summer sale!</h1></body></html>",
    "text": "{{firstName}}, don't miss our summer sale!"
  },
  "recipients": [
    {
      "email": "customer@example.com",
      "firstName": "John",
      "lastName": "Doe",
      "customFields": {
        "company": "Acme Corp",
        "segment": "premium"
      }
    }
  ],
  "schedule": {
    "sendAt": "2024-06-15T09:00:00Z",
    "timezone": "Australia/Sydney"
  },
  "settings": {
    "trackOpens": true,
    "trackClicks": true,
    "throttle": {
      "emailsPerHour": 1000,
      "emailsPerMinute": 50
    },
    "deliveryWindow": {
      "start": "09:00",
      "end": "17:00",
      "timezone": "Australia/Sydney"
    }
  },
  "tags": ["summer", "sale", "promotional"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (201 Created):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "camp_123456789",
  "name": "Summer Sale 2024",
  "status": "draft",
  "created": "2024-01-15T10:30:00Z",
  "updated": "2024-01-15T10:30:00Z",
  "recipientCount": 1,
  "estimatedSendTime": "2024-06-15T09:00:00Z",
  "links": {
    "self": "/campaigns/camp_123456789",
    "preview": "/campaigns/camp_123456789/preview",
    "send": "/campaigns/camp_123456789/send"
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Get Campaign</h4>
<br/>
<p><strong>GET</strong> <code>/campaigns/{campaignId}</code></p>
<br/>
<p>Retrieves campaign details and statistics.</p>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "camp_123456789",
  "name": "Summer Sale 2024",
  "description": "Promotional campaign for summer sale",
  "status": "sent",
  "created": "2024-01-15T10:30:00Z",
  "updated": "2024-01-15T11:45:00Z",
  "sent": "2024-06-15T09:00:00Z",
  "subject": "ðŸŒž Summer Sale - Up to 50% Off!",
  "fromName": "Marketing Team",
  "fromEmail": "marketing@company.com",
  "recipientCount": 10000,
  "statistics": {
    "sent": 9950,
    "delivered": 9800,
    "bounced": 150,
    "complained": 5,
    "opened": 4900,
    "clicked": 1470,
    "unsubscribed": 25,
    "deliveryRate": 98.49,
    "openRate": 50.0,
    "clickRate": 15.0,
    "bounceRate": 1.51,
    "complaintRate": 0.05,
    "unsubscribeRate": 0.26
  },
  "tags": ["summer", "sale", "promotional"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>List Campaigns</h4>
<br/>
<p><strong>GET</strong> <code>/campaigns</code></p>
<br/>
<p>Retrieves a paginated list of campaigns.</p>
<br/>
<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>limit</code> (integer, optional): Number of campaigns to return (default: 20, max: 100)</li>
<li><code>offset</code> (integer, optional): Number of campaigns to skip (default: 0)</li>
<li><code>status</code> (string, optional): Filter by status (<code>draft</code>, <code>scheduled</code>, <code>sending</code>, <code>sent</code>, <code>failed</code>)</li>
<li><code>tag</code> (string, optional): Filter by tag</li>
<li><code>sort</code> (string, optional): Sort field (<code>created</code>, <code>updated</code>, <code>name</code>, <code>sent</code>)</li>
<li><code>order</code> (string, optional): Sort order (<code>asc</code>, <code>desc</code>)</li>
</ul>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "campaigns": [
    {
      "id": "camp_123456789",
      "name": "Summer Sale 2024",
      "status": "sent",
      "created": "2024-01-15T10:30:00Z",
      "recipientCount": 10000,
      "statistics": {
        "deliveryRate": 98.49,
        "openRate": 50.0,
        "clickRate": 15.0
      }
    }
  ],
  "pagination": {
    "limit": 20,
    "offset": 0,
    "total": 150,
    "hasMore": true
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Update Campaign</h4>
<br/>
<p><strong>PUT</strong> <code>/campaigns/{campaignId}</code></p>
<br/>
<p>Updates an existing campaign (only allowed for draft campaigns).</p>
<br/>
<p><strong>Request Body:</strong> Same as Create Campaign</p>
<br/>
<p><strong>Response (200 OK):</strong> Same as Get Campaign</p>
<br/>
<h4>Delete Campaign</h4>
<br/>
<p><strong>DELETE</strong> <code>/campaigns/{campaignId}</code></p>
<br/>
<p>Deletes a campaign (only allowed for draft campaigns).</p>
<br/>
<p><strong>Response (204 No Content)</strong></p>
<br/>
<h4>Send Campaign</h4>
<br/>
<p><strong>POST</strong> <code>/campaigns/{campaignId}/send</code></p>
<br/>
<p>Sends a campaign immediately or schedules it for later.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "sendAt": "2024-06-15T09:00:00Z",
  "timezone": "Australia/Sydney"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "camp_123456789",
  "status": "scheduled",
  "scheduledFor": "2024-06-15T09:00:00Z",
  "estimatedCompletion": "2024-06-15T12:00:00Z"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Cancel Campaign</h4>
<br/>
<p><strong>POST</strong> <code>/campaigns/{campaignId}/cancel</code></p>
<br/>
<p>Cancels a scheduled campaign.</p>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "camp_123456789",
  "status": "cancelled",
  "cancelledAt": "2024-01-15T10:30:00Z"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>2. Template Management</h3>
<br/>
<h4>Create Template</h4>
<br/>
<p><strong>POST</strong> <code>/templates</code></p>
<br/>
<p>Creates a new email template.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "name": "Welcome Email Template",
  "description": "Template for welcoming new customers",
  "category": "welcome",
  "html": "<html><body><h1>Welcome {{firstName}}!</h1><p>Thank you for joining us.</p></body></html>",
  "text": "Welcome {{firstName}}! Thank you for joining us.",
  "variables": [
    {
      "name": "firstName",
      "type": "string",
      "required": true,
      "description": "Customer's first name"
    },
    {
      "name": "companyName",
      "type": "string",
      "required": false,
      "description": "Customer's company name"
    }
  ],
  "previewData": {
    "firstName": "John",
    "companyName": "Acme Corp"
  },
  "tags": ["welcome", "onboarding"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (201 Created):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "tmpl_123456789",
  "name": "Welcome Email Template",
  "category": "welcome",
  "created": "2024-01-15T10:30:00Z",
  "updated": "2024-01-15T10:30:00Z",
  "version": 1,
  "status": "active",
  "links": {
    "self": "/templates/tmpl_123456789",
    "preview": "/templates/tmpl_123456789/preview"
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Get Template</h4>
<br/>
<p><strong>GET</strong> <code>/templates/{templateId}</code></p>
<br/>
<p>Retrieves template details.</p>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "tmpl_123456789",
  "name": "Welcome Email Template",
  "description": "Template for welcoming new customers",
  "category": "welcome",
  "html": "<html><body><h1>Welcome {{firstName}}!</h1></body></html>",
  "text": "Welcome {{firstName}}! Thank you for joining us.",
  "variables": [
    {
      "name": "firstName",
      "type": "string",
      "required": true,
      "description": "Customer's first name"
    }
  ],
  "created": "2024-01-15T10:30:00Z",
  "updated": "2024-01-15T10:30:00Z",
  "version": 1,
  "status": "active",
  "usageCount": 25,
  "tags": ["welcome", "onboarding"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>List Templates</h4>
<br/>
<p><strong>GET</strong> <code>/templates</code></p>
<br/>
<p>Retrieves a paginated list of templates.</p>
<br/>
<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>limit</code> (integer, optional): Number of templates to return (default: 20, max: 100)</li>
<li><code>offset</code> (integer, optional): Number of templates to skip (default: 0)</li>
<li><code>category</code> (string, optional): Filter by category</li>
<li><code>status</code> (string, optional): Filter by status (<code>active</code>, <code>archived</code>)</li>
<li><code>tag</code> (string, optional): Filter by tag</li>
</ul>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "templates": [
    {
      "id": "tmpl_123456789",
      "name": "Welcome Email Template",
      "category": "welcome",
      "created": "2024-01-15T10:30:00Z",
      "version": 1,
      "status": "active",
      "usageCount": 25
    }
  ],
  "pagination": {
    "limit": 20,
    "offset": 0,
    "total": 50,
    "hasMore": true
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Preview Template</h4>
<br/>
<p><strong>POST</strong> <code>/templates/{templateId}/preview</code></p>
<br/>
<p>Generates a preview of the template with sample data.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "data": {
    "firstName": "John",
    "companyName": "Acme Corp"
  },
  "format": "html"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "html": "<html><body><h1>Welcome John!</h1><p>Thank you for joining us at Acme Corp.</p></body></html>",
  "text": "Welcome John! Thank you for joining us at Acme Corp.",
  "subject": "Welcome to Acme Corp, John!"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>3. Recipient Management</h3>
<br/>
<h4>Create Recipient List</h4>
<br/>
<p><strong>POST</strong> <code>/recipients/lists</code></p>
<br/>
<p>Creates a new recipient list.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "name": "Premium Customers",
  "description": "List of premium tier customers",
  "recipients": [
    {
      "email": "john@example.com",
      "firstName": "John",
      "lastName": "Doe",
      "customFields": {
        "company": "Acme Corp",
        "tier": "premium",
        "signupDate": "2023-01-15"
      }
    }
  ],
  "tags": ["premium", "customers"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (201 Created):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "list_123456789",
  "name": "Premium Customers",
  "created": "2024-01-15T10:30:00Z",
  "recipientCount": 1,
  "validEmails": 1,
  "invalidEmails": 0,
  "duplicates": 0,
  "status": "active"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Get Recipient List</h4>
<br/>
<p><strong>GET</strong> <code>/recipients/lists/{listId}</code></p>
<br/>
<p>Retrieves recipient list details.</p>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "list_123456789",
  "name": "Premium Customers",
  "description": "List of premium tier customers",
  "created": "2024-01-15T10:30:00Z",
  "updated": "2024-01-15T10:30:00Z",
  "recipientCount": 1000,
  "validEmails": 995,
  "invalidEmails": 5,
  "status": "active",
  "tags": ["premium", "customers"]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Add Recipients to List</h4>
<br/>
<p><strong>POST</strong> <code>/recipients/lists/{listId}/recipients</code></p>
<br/>
<p>Adds recipients to an existing list.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "recipients": [
    {
      "email": "jane@example.com",
      "firstName": "Jane",
      "lastName": "Smith",
      "customFields": {
        "company": "Tech Corp",
        "tier": "premium"
      }
    }
  ],
  "skipDuplicates": true
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "added": 1,
  "skipped": 0,
  "invalid": 0,
  "duplicates": 0,
  "totalRecipients": 1001
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Validate Email Addresses</h4>
<br/>
<p><strong>POST</strong> <code>/recipients/validate</code></p>
<br/>
<p>Validates a list of email addresses.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "emails": [
    "valid@example.com",
    "invalid-email",
    "bounced@example.com"
  ]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "results": [
    {
      "email": "valid@example.com",
      "valid": true,
      "reason": "valid"
    },
    {
      "email": "invalid-email",
      "valid": false,
      "reason": "invalid_format"
    },
    {
      "email": "bounced@example.com",
      "valid": false,
      "reason": "previously_bounced"
    }
  ],
  "summary": {
    "total": 3,
    "valid": 1,
    "invalid": 2
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>4. Analytics and Reporting</h3>
<br/>
<h4>Get Campaign Analytics</h4>
<br/>
<p><strong>GET</strong> <code>/campaigns/{campaignId}/analytics</code></p>
<br/>
<p>Retrieves detailed analytics for a campaign.</p>
<br/>
<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>period</code> (string, optional): Time period (<code>1h</code>, <code>24h</code>, <code>7d</code>, <code>30d</code>)</li>
<li><code>granularity</code> (string, optional): Data granularity (<code>hour</code>, <code>day</code>)</li>
</ul>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "campaignId": "camp_123456789",
  "period": {
    "start": "2024-06-15T09:00:00Z",
    "end": "2024-06-16T09:00:00Z"
  },
  "summary": {
    "sent": 10000,
    "delivered": 9800,
    "bounced": 150,
    "complained": 5,
    "opened": 4900,
    "clicked": 1470,
    "unsubscribed": 25,
    "deliveryRate": 98.0,
    "openRate": 50.0,
    "clickRate": 15.0,
    "bounceRate": 1.5,
    "complaintRate": 0.05,
    "unsubscribeRate": 0.26
  },
  "timeline": [
    {
      "timestamp": "2024-06-15T09:00:00Z",
      "sent": 1000,
      "delivered": 980,
      "opened": 490,
      "clicked": 147
    }
  ],
  "topLinks": [
    {
      "url": "https://example.com/product1",
      "clicks": 500,
      "uniqueClicks": 450
    }
  ],
  "bounceReasons": [
    {
      "reason": "mailbox_full",
      "count": 75
    },
    {
      "reason": "invalid_address",
      "count": 50
    }
  ],
  "deviceStats": {
    "desktop": 60,
    "mobile": 35,
    "tablet": 5
  },
  "locationStats": [
    {
      "country": "Australia",
      "opens": 2450,
      "clicks": 735
    }
  ]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Get Account Analytics</h4>
<br/>
<p><strong>GET</strong> <code>/analytics/account</code></p>
<br/>
<p>Retrieves account-level analytics.</p>
<br/>
<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>period</code> (string, optional): Time period (<code>7d</code>, <code>30d</code>, <code>90d</code>, <code>1y</code>)</li>
<li><code>granularity</code> (string, optional): Data granularity (<code>day</code>, <code>week</code>, <code>month</code>)</li>
</ul>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "period": {
    "start": "2024-01-01T00:00:00Z",
    "end": "2024-01-31T23:59:59Z"
  },
  "summary": {
    "campaignsSent": 25,
    "emailsSent": 250000,
    "deliveryRate": 98.5,
    "averageOpenRate": 22.5,
    "averageClickRate": 3.2,
    "bounceRate": 1.5,
    "complaintRate": 0.02
  },
  "timeline": [
    {
      "date": "2024-01-01",
      "campaignsSent": 2,
      "emailsSent": 15000,
      "delivered": 14775,
      "opened": 3325,
      "clicked": 480
    }
  ],
  "topCampaigns": [
    {
      "id": "camp_123456789",
      "name": "Summer Sale 2024",
      "openRate": 50.0,
      "clickRate": 15.0
    }
  ]
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>5. Webhook Management</h3>
<br/>
<h4>Create Webhook</h4>
<br/>
<p><strong>POST</strong> <code>/webhooks</code></p>
<br/>
<p>Creates a new webhook endpoint.</p>
<br/>
<p><strong>Request Body:</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "url": "https://your-app.com/webhooks/email-events",
  "events": [
    "email.delivered",
    "email.bounced",
    "email.complained",
    "email.opened",
    "email.clicked",
    "email.unsubscribed"
  ],
  "secret": "your-webhook-secret",
  "active": true
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p><strong>Response (201 Created):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "webhook_123456789",
  "url": "https://your-app.com/webhooks/email-events",
  "events": [
    "email.delivered",
    "email.bounced",
    "email.complained",
    "email.opened",
    "email.clicked",
    "email.unsubscribed"
  ],
  "active": true,
  "created": "2024-01-15T10:30:00Z"
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Webhook Event Format</h4>
<br/>
<p>Webhook events are sent as POST requests with the following format:</p>
<br/>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "event_123456789",
  "type": "email.opened",
  "timestamp": "2024-06-15T10:30:00Z",
  "data": {
    "campaignId": "camp_123456789",
    "recipientEmail": "customer@example.com",
    "messageId": "msg_123456789",
    "userAgent": "Mozilla/5.0...",
    "ipAddress": "192.168.1.1",
    "location": {
      "country": "Australia",
      "region": "NSW",
      "city": "Sydney"
    }
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>6. Account Management</h3>
<br/>
<h4>Get Account Information</h4>
<br/>
<p><strong>GET</strong> <code>/account</code></p>
<br/>
<p>Retrieves account information and quotas.</p>
<br/>
<p><strong>Response (200 OK):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">json</ac:parameter>
  <ac:plain-text-body><![CDATA[
{
  "id": "acc_123456789",
  "name": "Acme Corporation",
  "plan": "enterprise",
  "status": "active",
  "created": "2023-01-15T10:30:00Z",
  "quotas": {
    "emailsPerMonth": 1000000,
    "emailsUsedThisMonth": 250000,
    "campaignsPerMonth": 100,
    "campaignsUsedThisMonth": 25,
    "recipientListsMax": 50,
    "recipientListsUsed": 12,
    "templatesMax": 100,
    "templatesUsed": 25
  },
  "settings": {
    "timezone": "Australia/Sydney",
    "defaultFromEmail": "noreply@acme.com",
    "defaultFromName": "Acme Corporation",
    "trackingEnabled": true,
    "suppressionListEnabled": true
  }
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h2>Webhook Events</h2>
<br/>
<h3>Event Types</h3>
<br/>
<table>
<thead>
<tr>
<th>Event Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`email.sent`</td>
<td>Email was successfully sent to SES</td>
</tr>
<tr>
<td>`email.delivered`</td>
<td>Email was delivered to recipient&#x27;s inbox</td>
</tr>
<tr>
<td>`email.bounced`</td>
<td>Email bounced (hard or soft bounce)</td>
</tr>
<tr>
<td>`email.complained`</td>
<td>Recipient marked email as spam</td>
</tr>
<tr>
<td>`email.opened`</td>
<td>Recipient opened the email</td>
</tr>
<tr>
<td>`email.clicked`</td>
<td>Recipient clicked a link in the email</td>
</tr>
<tr>
<td>`email.unsubscribed`</td>
<td>Recipient unsubscribed</td>
</tr>
<tr>
<td>`campaign.started`</td>
<td>Campaign sending started</td>
</tr>
<tr>
<td>`campaign.completed`</td>
<td>Campaign sending completed</td>
</tr>
<tr>
<td>`campaign.failed`</td>
<td>Campaign sending failed</td>
</tr>
</tbody>
</table>
<br/>
<h3>Webhook Security</h3>
<br/>
<p>Webhooks are secured using HMAC-SHA256 signatures:</p>
<br/>
<ol>
<li>The webhook payload is signed using your webhook secret</li>
<li>The signature is included in the <code>X-Signature-SHA256</code> header</li>
<li>Verify the signature to ensure the webhook is from our service</li>
</ol>
<br/>
<p><strong>Example verification (Node.js):</strong></p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">javascript</ac:parameter>
  <ac:plain-text-body><![CDATA[
const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  
  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expectedSignature)
  );
}
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h2>SDK Examples</h2>
<br/>
<h3>JavaScript/Node.js</h3>
<br/>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">javascript</ac:parameter>
  <ac:plain-text-body><![CDATA[
const EmailPlatformAPI = require('@messagecentre/email-platform-sdk');

const client = new EmailPlatformAPI({
  apiKey: 'your-api-key',
  baseURL: 'https://api.emailplatform.messagecentre.com/v1'
});

// Create a campaign
const campaign = await client.campaigns.create({
  name: 'Welcome Campaign',
  subject: 'Welcome to our platform!',
  template: {
    html: '<h1>Welcome {{firstName}}!</h1>',
    text: 'Welcome {{firstName}}!'
  },
  recipients: [
    {
      email: 'customer@example.com',
      firstName: 'John'
    }
  ]
});

// Send the campaign
await client.campaigns.send(campaign.id);
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>Python</h3>
<br/>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">python</ac:parameter>
  <ac:plain-text-body><![CDATA[
from email_platform_sdk import EmailPlatformClient

client = EmailPlatformClient(
    api_key='your-api-key',
    base_url='https://api.emailplatform.messagecentre.com/v1'
)

# Create a campaign
campaign = client.campaigns.create({
    'name': 'Welcome Campaign',
    'subject': 'Welcome to our platform!',
    'template': {
        'html': '<h1>Welcome {{firstName}}!</h1>',
        'text': 'Welcome {{firstName}}!'
    },
    'recipients': [
        {
            'email': 'customer@example.com',
            'firstName': 'John'
        }
    ]
})

# Send the campaign
client.campaigns.send(campaign['id'])
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h3>cURL Examples</h3>
<br/>
<h4>Create Campaign</h4>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">bash</ac:parameter>
  <ac:plain-text-body><![CDATA[
curl -X POST https://api.emailplatform.messagecentre.com/v1/campaigns \
  -H "x-api-key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Welcome Campaign",
    "subject": "Welcome!",
    "template": {
      "html": "<h1>Welcome!</h1>",
      "text": "Welcome!"
    },
    "recipients": [
      {
        "email": "test@example.com",
        "firstName": "Test"
      }
    ]
  }'
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h4>Get Campaign Analytics</h4>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">bash</ac:parameter>
  <ac:plain-text-body><![CDATA[
curl -X GET https://api.emailplatform.messagecentre.com/v1/campaigns/camp_123456789/analytics \
  -H "x-api-key: your-api-key"
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h2>Testing</h2>
<br/>
<h3>Sandbox Environment</h3>
<br/>
<p>Use the sandbox environment for testing:</p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">none</ac:parameter>
  <ac:plain-text-body><![CDATA[
Sandbox URL: https://sandbox-api.emailplatform.messagecentre.com/v1
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<p>In sandbox mode:</p>
<ul>
<li>No actual emails are sent</li>
<li>All API responses are simulated</li>
<li>Rate limits are relaxed for testing</li>
<li>Test data is automatically cleaned up after 24 hours</li>
</ul>
<br/>
<h3>Test API Keys</h3>
<br/>
<p>Test API keys are prefixed with <code>test_</code> and only work in sandbox mode:</p>
<ac:structured-macro ac:name="code" ac:schema-version="1">
  <ac:parameter ac:name="language">none</ac:parameter>
  <ac:plain-text-body><![CDATA[
Test API Key: test_sk_1234567890abcdef
]]></ac:plain-text-body>
</ac:structured-macro>
<br/>
<h2>Changelog</h2>
<br/>
<h3>Version 1.0.0 (2024-01-15)</h3>
<ul>
<li>Initial API release</li>
<li>Campaign management endpoints</li>
<li>Template management endpoints</li>
<li>Recipient management endpoints</li>
<li>Analytics and reporting endpoints</li>
<li>Webhook support</li>
</ul>
<br/>
<h3>Version 1.1.0 (Planned - 2024-03-01)</h3>
<ul>
<li>A/B testing support</li>
<li>Advanced segmentation</li>
<li>Automation workflows</li>
<li>Enhanced analytics</li>
</ul>
<br/>
<h2>Support</h2>
<br/>
<p>For API support and questions:</p>
<ul>
<li><strong>Documentation</strong>: https://docs.emailplatform.messagecentre.com</li>
<li><strong>Support Email</strong>: api-support@messagecentre.com</li>
<li><strong>Status Page</strong>: https://status.emailplatform.messagecentre.com</li>
<li><strong>Community Forum</strong>: https://community.messagecentre.com</li>
</ul>
<br/>
<h2>Terms of Service</h2>
<br/>
<p>By using this API, you agree to our Terms of Service and Privacy Policy:</p>
<ul>
<li><strong>Terms of Service</strong>: https://messagecentre.com/terms</li>
<li><strong>Privacy Policy</strong>: https://messagecentre.com/privacy</li>
<li><strong>Acceptable Use Policy</strong>: https://messagecentre.com/acceptable-use</li>
</ul>
<br/>
</body>
</html>